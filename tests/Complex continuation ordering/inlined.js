()=>{const test=function(){try{function _temp2(){promise=new Promise(r=>{promiseResolve=r;});return Promise.resolve(wait()).then(function(){promise=null;promiseResolve();messages.push("stop "+num);});}let promiseResolve;let num=++index;messages.push("start "+num);// place of interest
const _temp=_for(function(){return!!promise;},void 0,function(){messages.push("wait "+num);return Promise.resolve(promise).then(function(){});});return Promise.resolve(_temp&&_temp.then?_temp.then(_temp2):_temp2(_temp));}catch(e){return Promise.reject(e);}};let index=0;let promise=null;let messages=[];function wait(){return Promise.resolve();}return Promise.all([test(),test(),test()]).then(()=>messages);}